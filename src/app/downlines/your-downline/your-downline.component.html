<div fxLayout="column"  class="components-container-gt-xs"  [ngClass.xs]="'components-container-xs'"  fxLayoutGap="20px">
	<div fxFlex class="table-component-holder mat-elevation-z4">
		<mat-toolbar class="table-header">
			<h1 class="mat-headline center-align" >Yours Downlines</h1>
		</mat-toolbar>
		<div class="table-container">
            <!-- <div class="spinner-container" *ngIf="dataSource.loading$ | async">
                <mat-spinner></mat-spinner>
            </div> -->
            <mat-form-field appearance="standard" *ngIf="length > 0">
                <mat-label>Search Distributor</mat-label>
                <input matInput placeholder="Search distributor" (keyup.enter)="applySearch($event.target.value)" #input>
            </mat-form-field>
            <button *ngIf="length > 0" (click)="downloadAllReport()" class="download-button">Download All Report</button> 
            <mat-table #table [dataSource]="dataSource"  style="margin-top: 20px;">

				<!-- full name Column -->
				<ng-container matColumnDef="Name">
					<mat-header-cell *matHeaderCellDef mat-sort-header> Name </mat-header-cell>
					<mat-cell *matCellDef="let row"> {{row.full_name}} </mat-cell>
				</ng-container>
				<!-- email  Column -->
				<ng-container matColumnDef="Email">
					<mat-header-cell *matHeaderCellDef mat-sort-header> Email </mat-header-cell>
					<mat-cell *matCellDef="let row"> {{row.email}} </mat-cell>
				</ng-container>
 
						<!-- distributor id  Column -->
						<ng-container matColumnDef="Distributor Id">
							<mat-header-cell *matHeaderCellDef mat-sort-header> Distributor Id </mat-header-cell>
							<mat-cell *matCellDef="let row"> {{row.distributor_id}} </mat-cell>
						</ng-container>

                        	<!-- Upline name  Column -->
						<ng-container matColumnDef="Upline Name">
							<mat-header-cell *matHeaderCellDef mat-sort-header> Upline Name</mat-header-cell>
							<mat-cell *matCellDef="let row"> {{row.upline_name}} </mat-cell>
						</ng-container>

                        <!-- Self PV   Column -->
						<ng-container matColumnDef="Self PV">
							<mat-header-cell *matHeaderCellDef mat-sort-header> Self PV</mat-header-cell>
							<mat-cell *matCellDef="let row"> {{row.self_pv}} </mat-cell>
						</ng-container>
                        <!-- Frontline Count  Column -->
						<ng-container matColumnDef="Frontline Count">
							<mat-header-cell *matHeaderCellDef mat-sort-header> Frontline Count</mat-header-cell>
							<mat-cell *matCellDef="let row"> {{row.frontline_count}} </mat-cell>
						</ng-container>
                        <!-- Training Count  Column -->
						<ng-container matColumnDef="Training Count">
							<mat-header-cell *matHeaderCellDef mat-sort-header> Training Count</mat-header-cell>
							<mat-cell *matCellDef="let row"> {{row.training_count}} </mat-cell>
						</ng-container>

                        <ng-container matColumnDef="Download Report">
							<mat-header-cell *matHeaderCellDef mat-sort-header> Download Report</mat-header-cell>
							<mat-cell *matCellDef="let row"> <button (click)="downloadCSV(row)">Download Report</button> </mat-cell>
						</ng-container>
                <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row> 
   
                <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>
			</mat-table>
            <mat-paginator *ngIf="length > 0"
            #paginator
            [pageSizeOptions]="pageSizeOptions"
            [length]="totalRows" 
            [pageIndex]="currentPage" [pageSize]="pageSize"
            (page)="pageChanged($event)"
            showFirstLastButtons
          ></mat-paginator>
        </div>
	</div>
</div>
