"use strict";(self.webpackChunkcd_admin_v2=self.webpackChunkcd_admin_v2||[]).push([[325],{5325:(H,g,i)=>{i.r(g),i.d(g,{TrainingModule:()=>B,appRoutes:()=>S});var c=i(9808),h=i(8555),b=i(1620),y=i(2930),p=i(8908),f=i(415),u=i(591),j=i(1086),w=i(7221),E=i(537);class D{constructor(a){this.trainingService=a,this.trainingSubject=new u.X([]),this.loadingSubject=new u.X(!1),this.loading$=this.loadingSubject.asObservable()}connect(a){return this.trainingSubject.asObservable()}disconnect(a){this.trainingSubject.complete(),this.loadingSubject.complete()}loadTrainings(){console.log("aya kya"),this.loadingSubject.next(!0),this.trainingService.getTrainingList().pipe((0,w.K)(()=>(0,j.of)([])),(0,E.x)(()=>this.loadingSubject.next(!1))).subscribe(a=>this.trainingSubject.next(a.data))}}var M=i(5226),v=i.n(M),e=i(5e3),s=i(277),O=i(4784),C=i(6367),r=i(1149),x=i(3482);function k(t,a){1&t&&(e.\u0275\u0275elementStart(0,"div",15),e.\u0275\u0275element(1,"mat-spinner"),e.\u0275\u0275elementEnd())}function I(t,a){1&t&&(e.\u0275\u0275elementStart(0,"mat-header-cell",16),e.\u0275\u0275text(1," ID "),e.\u0275\u0275elementEnd())}function Q(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"mat-cell"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.training_id," ")}}function R(t,a){1&t&&(e.\u0275\u0275elementStart(0,"mat-header-cell",16),e.\u0275\u0275text(1," Training "),e.\u0275\u0275elementEnd())}function z(t,a){if(1&t&&(e.\u0275\u0275elementStart(0,"mat-cell"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=a.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.training," ")}}function $(t,a){1&t&&(e.\u0275\u0275elementStart(0,"mat-header-cell",16),e.\u0275\u0275text(1," Training Taken "),e.\u0275\u0275elementEnd())}function F(t,a){if(1&t){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-cell")(1,"mat-checkbox",17),e.\u0275\u0275listener("change",function(){const d=e.\u0275\u0275restoreView(n).$implicit;return e.\u0275\u0275nextContext().isAllSelected(d)})("ngModelChange",function(l){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().allSelected=l}),e.\u0275\u0275elementEnd()()}if(2&t){const n=a.$implicit,o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",o.allSelected)("checked",n.is_taken)}}function L(t,a){1&t&&e.\u0275\u0275element(0,"mat-header-row")}function P(t,a){1&t&&e.\u0275\u0275element(0,"mat-row")}let V=(()=>{class t{constructor(n,o){this.trainingService=n,this.router=o,this.error="",this.loading=!1,this.rows=[],this.checkboxChecked=!1,this.displayedColumns=["seqNo","Training","Training Taken"]}ngOnInit(){this.dataSource=new D(this.trainingService),this.dataSource.loadTrainings(),console.log("data source",this.dataSource)}userTraining(n){console.log("event",n),this.checkboxChecked=!this.checkboxChecked}saveUserTraining(n,o){this.trainingService.saveTrainingList(n,o).pipe().subscribe(l=>{console.log("data save train",l),v().fire(l.message)},l=>{console.log("errrr",this.error.error),this.error=l,this.loading=!1,v().fire({icon:"error",title:"Oops...",text:"Something went wrong!"})})}isAllSelected(n){console.log("items",n),this.dataSource.trainingSubject._value.forEach(o=>{console.log("value wala",o),o.training_id==n.training_id&&(this.checkboxChecked=!o.is_taken,console.log("pehla",this.checkboxChecked),console.log("final",this.checkboxChecked),this.saveUserTraining(n.training_id.toString(),this.checkboxChecked))})}}return t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(f.O),e.\u0275\u0275directiveInject(h.F0))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["app-training"]],viewQuery:function(n,o){if(1&n&&e.\u0275\u0275viewQuery(p.NW,7),2&n){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(o.paginator1=l.first)}},decls:21,vars:7,consts:[["fxLayout","column","fxLayoutGap","20px",1,"components-container-gt-xs",3,"ngClass.xs"],["fxFlex","",1,"table-component-holder","mat-elevation-z4"],[1,"table-header"],[1,"mat-headline","center-align"],[1,"table-container"],["class","spinner-container",4,"ngIf"],[2,"margin-top","20px",3,"dataSource"],["table",""],["matColumnDef","seqNo"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","Training"],["matColumnDef","Training Taken"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"spinner-container"],["mat-sort-header",""],[3,"ngModel","checked","change","ngModelChange"]],template:function(n,o){1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"mat-toolbar",2)(3,"h1",3),e.\u0275\u0275text(4,"Training List"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275template(6,k,2,0,"div",5),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275elementStart(8,"mat-table",6,7),e.\u0275\u0275elementContainerStart(10,8),e.\u0275\u0275template(11,I,2,0,"mat-header-cell",9),e.\u0275\u0275template(12,Q,2,1,"mat-cell",10),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(13,11),e.\u0275\u0275template(14,R,2,0,"mat-header-cell",9),e.\u0275\u0275template(15,z,2,1,"mat-cell",10),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(16,12),e.\u0275\u0275template(17,$,2,0,"mat-header-cell",9),e.\u0275\u0275template(18,F,2,2,"mat-cell",10),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(19,L,1,0,"mat-header-row",13),e.\u0275\u0275template(20,P,1,0,"mat-row",14),e.\u0275\u0275elementEnd()()()()),2&n&&(e.\u0275\u0275property("ngClass.xs","components-container-xs"),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(7,5,o.dataSource.loading$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("dataSource",o.dataSource),e.\u0275\u0275advance(11),e.\u0275\u0275property("matHeaderRowDef",o.displayedColumns),e.\u0275\u0275advance(1),e.\u0275\u0275property("matRowDefColumns",o.displayedColumns))},directives:[s.xw,s.SQ,O.oO,s.yH,C.Ye,c.O5,r.BZ,r.w1,r.fO,r.ge,r.Dz,r.ev,x.oG,r.as,r.XQ,r.nj,r.Gk],pipes:[c.Ov],styles:[".table-header[_ngcontent-%COMP%]{background-color:#327ebd;color:#fff;padding:0 5px}.table-container[_ngcontent-%COMP%]{padding:5px 15px 15px}.table-component-holder[_ngcontent-%COMP%]{border:1px solid #327ebd;background-color:#fff}"]}),t})();var m=i(520),T=i(1443);const S=[{path:"",component:V}];let B=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=e.\u0275\u0275defineInjector({providers:[{provide:m.TP,useClass:T.zu,multi:!0},{provide:m.TP,useClass:T.aQ,multi:!0},,f.O],imports:[[c.ez,b.o9,y.QW,h.Bz.forChild(S),m.JF,p.TU,C.g0,r.p0,x.p9]]}),t})()}}]);