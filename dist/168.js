"use strict";(self.webpackChunkcd_admin_v2=self.webpackChunkcd_admin_v2||[]).push([[168],{9168:(L,_,m)=>{m.r(_),m.d(_,{DownlineModule:()=>Ue,appRoutes:()=>P});var d=m(9808),v=m(8555),x=m(1620),b=m(2930),w=m(520),S=m(1443),i=m(8908),a=m(6367),l=m(1149),p=m(3482),s=m(3075),u=m(7915),C=m(5226),f=m.n(C),e=m(5e3),g=m(277),E=m(4784),D=m(1223),y=m(6766),T=m(1377);function A(t,r){1&t&&(e.\u0275\u0275elementStart(0,"mat-error",16),e.\u0275\u0275text(1," First name is required "),e.\u0275\u0275elementEnd())}function R(t,r){1&t&&(e.\u0275\u0275elementStart(0,"mat-error",16),e.\u0275\u0275text(1," Last name is required "),e.\u0275\u0275elementEnd())}function U(t,r){1&t&&(e.\u0275\u0275elementStart(0,"mat-error",16),e.\u0275\u0275text(1," Please enter valid email "),e.\u0275\u0275elementEnd())}function Y(t,r){1&t&&(e.\u0275\u0275elementStart(0,"mat-error",16),e.\u0275\u0275text(1," Please enter valid mobile number "),e.\u0275\u0275elementEnd())}function N(t,r){1&t&&(e.\u0275\u0275elementStart(0,"mat-error",16),e.\u0275\u0275text(1," Distributor Id is required "),e.\u0275\u0275elementEnd())}function M(t,r){1&t&&(e.\u0275\u0275elementStart(0,"mat-error",16),e.\u0275\u0275text(1," Self Pv is required "),e.\u0275\u0275elementEnd())}function j(t,r){1&t&&(e.\u0275\u0275elementStart(0,"button",17),e.\u0275\u0275text(1,"Submit"),e.\u0275\u0275elementEnd())}let z=(()=>{class t{constructor(n,o,c){this.form=n,this.userService=o,this.router=c,this.submitted=!1,this.error="",this.loading=!1}ngOnInit(){this.createForm(),this.root_id=JSON.parse(localStorage.getItem("profile")).root_id,this.parent_id=JSON.parse(localStorage.getItem("profile")).parent_id,this.full_name=JSON.parse(localStorage.getItem("profile")).full_name,console.log("dsds",this.root_id)}createForm(){this.registerForm=this.form.group({first_name:["",{validators:[s.kI.required]}],last_name:["",{validators:[s.kI.required]}],email:["",s.kI.required],mobile:["",{validators:[s.kI.minLength(10)]}],self_pv:["",{validators:[s.kI.required]}],distributor_id:["",{validators:[s.kI.required]}]})}get number(){return this.registerForm.get("mobile")}get username(){return this.registerForm.get("first_name")}get email(){return this.registerForm.get("email")}get f(){return this.registerForm.controls}onSubmit(){if(console.log("submit",this.registerForm.value),this.submitted=!0,this.registerForm.invalid)return;const n={first_name:this.registerForm.value.first_name,last_name:this.registerForm.value.last_name,email:this.registerForm.value.email,mobile:this.registerForm.value.mobile,distributor_id:this.registerForm.value.distributor_id,self_pv:this.registerForm.value.self_pv,root_id:this.root_id.toString(),parent_id:this.parent_id.toString(),upline_name:this.full_name};this.userService.registerDownline(n).pipe().subscribe(o=>{f().fire(o.message),this.onClear()},o=>{console.log("error",o),console.log("errrr",this.error.error),this.loading=!1,f().fire({icon:"error",title:"Oops...",text:"Something went wrong!"})})}onClear(){this.submitted=!1,this.f.first_name.reset(),this.f.last_name.reset(),this.f.email.reset(),this.f.mobile.reset(),this.f.distributor_id.reset(),this.f.self_pv.reset()}}return t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(s.qu),e.\u0275\u0275directiveInject(u.K),e.\u0275\u0275directiveInject(v.F0))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["app-create-downline"]],decls:26,vars:10,consts:[["fxLayout","column","fxLayoutGap","20px",1,"components-container-gt-xs",3,"ngClass.xs"],["fxFlex","",1,"form-component-holder","mat-elevation-z4"],[1,"form-header"],[1,"mat-headline","center-align"],["fxLayout","column","fxLayoutAlign","space-around stretch",1,"widgetHolder-content",2,"background-color","white",3,"hidden"],["fxLayout","column","fxFlex","100",3,"formGroup","ngSubmit"],[1,"width"],["type","text","matInput","","placeholder","Enter First Name","formControlName","first_name","required",""],["align","end","style","color: red;","class","mat-body-1 center-align ",4,"ngIf"],["type","text","matInput","","placeholder","Enter Last Name","formControlName","last_name","required",""],["type","email","matInput","","placeholder","Enter Your Email","formControlName","email","required","","pattern","^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$","required",""],["align","end","style","color: red;","class","mat-body-1 center-align",4,"ngIf"],["type","text","matInput","","placeholder","Enter Mobile Number","formControlName","mobile","required","","pattern","[0-9]*"],["type","text","matInput","","placeholder","Enter Distributor Id","formControlName","distributor_id"],["type","text","matInput","","placeholder","Enter Self Pv of your Downline","formControlName","self_pv"],["style","font-weight: bold;","mat-raised-button","","type","submit","class","mat-headline center-align",4,"ngIf"],["align","end",1,"mat-body-1","center-align",2,"color","red"],["mat-raised-button","","type","submit",1,"mat-headline","center-align",2,"font-weight","bold"]],template:function(n,o){1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"mat-toolbar",2)(3,"h1",3),e.\u0275\u0275text(4,"Register Your Downline"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",4)(6,"form",5),e.\u0275\u0275listener("ngSubmit",function(){return o.onSubmit()}),e.\u0275\u0275elementStart(7,"mat-form-field",6),e.\u0275\u0275element(8,"input",7),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(9,A,2,0,"mat-error",8),e.\u0275\u0275elementStart(10,"mat-form-field",6),e.\u0275\u0275element(11,"input",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(12,R,2,0,"mat-error",8),e.\u0275\u0275elementStart(13,"mat-form-field",6),e.\u0275\u0275element(14,"input",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(15,U,2,0,"mat-error",11),e.\u0275\u0275elementStart(16,"mat-form-field",6),e.\u0275\u0275element(17,"input",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(18,Y,2,0,"mat-error",11),e.\u0275\u0275elementStart(19,"mat-form-field",6),e.\u0275\u0275element(20,"input",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(21,N,2,0,"mat-error",11),e.\u0275\u0275elementStart(22,"mat-form-field",6),e.\u0275\u0275element(23,"input",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(24,M,2,0,"mat-error",11),e.\u0275\u0275template(25,j,2,0,"button",15),e.\u0275\u0275elementEnd()()()()),2&n&&(e.\u0275\u0275property("ngClass.xs","components-container-xs"),e.\u0275\u0275advance(5),e.\u0275\u0275property("hidden",o.submitted),e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroup",o.registerForm),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",o.f.first_name.invalid&&(o.f.first_name.dirty||o.f.first_name.touched)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",o.f.last_name.invalid&&(o.f.last_name.dirty||o.f.last_name.touched)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",o.email.invalid&&(o.email.dirty||o.email.touched)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",o.f.mobile.hasError("minlength")&&(o.f.mobile.dirty||o.f.mobile.touched)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",o.f.distributor_id.invalid&&(o.f.distributor_id.dirty||o.f.distributor_id.touched)),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",o.f.self_pv.invalid&&(o.f.self_pv.dirty||o.f.self_pv.touched)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.f.first_name.valid&&o.f.email.valid&&o.f.mobile.valid&&o.f.last_name.valid&&o.f.distributor_id.valid&&o.f.self_pv.valid))},directives:[g.xw,g.SQ,E.oO,g.yH,a.Ye,g.Wh,s._Y,s.JL,s.sg,D.KE,y.Nt,s.Fj,s.JJ,s.u,s.Q7,d.O5,D.TO,s.c5,T.lW],styles:[".form-header[_ngcontent-%COMP%]{background-color:#327ebd;color:#fff;padding:0 5px}.mat-form-field[_ngcontent-%COMP%]{padding-left:10px}.validation-message[_ngcontent-%COMP%]{background-color:#00bcd4}.container[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}.form-container[_ngcontent-%COMP%]{padding:5px 15px 15px}.form-component-holder[_ngcontent-%COMP%]{border:1px solid #327ebd;background-color:#fff}"]}),t})();var B=m(1279),V=m(8416),H=m(5498),I=m(591),Q=m(1086),$=m(7221),W=m(537);class k{constructor(r){this.userService=r,this.downlineSubject=new I.X([]),this.loadingSubject=new I.X(!1),this.loading$=this.loadingSubject.asObservable()}connect(r){return this.downlineSubject.asObservable()}disconnect(r){this.downlineSubject.complete(),this.loadingSubject.complete()}loadPendingDownlines(){console.log("aya kya"),this.loadingSubject.next(!0),this.userService.getPendingDownlines().pipe((0,$.K)(()=>(0,Q.of)([])),(0,W.x)(()=>this.loadingSubject.next(!1))).subscribe(r=>this.downlineSubject.next(r.data))}}function J(t,r){1&t&&(e.\u0275\u0275elementStart(0,"div",17),e.\u0275\u0275element(1,"mat-spinner"),e.\u0275\u0275elementEnd())}function G(t,r){1&t&&(e.\u0275\u0275elementStart(0,"mat-header-cell",18),e.\u0275\u0275text(1," First Name "),e.\u0275\u0275elementEnd())}function K(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"mat-cell"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=r.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.first_name," ")}}function X(t,r){1&t&&(e.\u0275\u0275elementStart(0,"mat-header-cell",18),e.\u0275\u0275text(1," Last Name "),e.\u0275\u0275elementEnd())}function Z(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"mat-cell"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=r.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.last_name," ")}}function q(t,r){1&t&&(e.\u0275\u0275elementStart(0,"mat-header-cell",18),e.\u0275\u0275text(1," Email "),e.\u0275\u0275elementEnd())}function ee(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"mat-cell"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=r.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.email," ")}}function te(t,r){1&t&&(e.\u0275\u0275elementStart(0,"mat-header-cell",18),e.\u0275\u0275text(1," Distributor Id "),e.\u0275\u0275elementEnd())}function ne(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"mat-cell"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=r.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.distributor_id," ")}}function oe(t,r){1&t&&(e.\u0275\u0275elementStart(0,"mat-header-cell",18),e.\u0275\u0275text(1,"Action"),e.\u0275\u0275elementEnd())}function re(t,r){if(1&t){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-cell")(1,"button",19),e.\u0275\u0275listener("click",function(){const h=e.\u0275\u0275restoreView(n).$implicit;return e.\u0275\u0275nextContext().deleteDownline(h)}),e.\u0275\u0275text(2,"Delete"),e.\u0275\u0275elementEnd()()}}function ae(t,r){1&t&&e.\u0275\u0275element(0,"mat-header-row")}function le(t,r){1&t&&e.\u0275\u0275element(0,"mat-row")}let ie=(()=>{class t{constructor(n,o){this.router=n,this.userService=o,this.displayedColumns=["First Name","Last Name","Distributor Id","Email","Action"],this.error="",this.loading=!1}ngOnInit(){this.dataSource=new k(this.userService),this.dataSource.loadPendingDownlines(),console.log("data source",this.dataSource)}deleteDownline(n){console.log("delete",n),this.userService.deletePendingDownline(n).pipe().subscribe(o=>{console.log(o),this.dataSource.loadPendingDownlines(),f().fire(o.message)},o=>{console.log("errrr",this.error.error),this.error=o,this.loading=!1,f().fire({icon:"error",title:"Oops...",text:"Something went wrong!"})})}}return t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(v.F0),e.\u0275\u0275directiveInject(u.K))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["app-pending-downline"]],viewQuery:function(n,o){if(1&n&&e.\u0275\u0275viewQuery(i.NW,5),2&n){let c;e.\u0275\u0275queryRefresh(c=e.\u0275\u0275loadQuery())&&(o.paginator=c.first)}},decls:27,vars:7,consts:[["fxLayout","column","fxLayoutGap","20px",1,"components-container-gt-xs",3,"ngClass.xs"],["fxFlex","",1,"table-component-holder","mat-elevation-z4"],[1,"table-header"],[1,"mat-headline","center-align"],[1,"table-container"],["class","spinner-container",4,"ngIf"],[2,"margin-top","20px",3,"dataSource"],["table",""],["matColumnDef","First Name"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","Last Name"],["matColumnDef","Email"],["matColumnDef","Distributor Id"],["matColumnDef","Action"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"spinner-container"],["mat-sort-header",""],[3,"click"]],template:function(n,o){1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"mat-toolbar",2)(3,"h1",3),e.\u0275\u0275text(4,"Pending Downlines"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275template(6,J,2,0,"div",5),e.\u0275\u0275pipe(7,"async"),e.\u0275\u0275elementStart(8,"mat-table",6,7),e.\u0275\u0275elementContainerStart(10,8),e.\u0275\u0275template(11,G,2,0,"mat-header-cell",9),e.\u0275\u0275template(12,K,2,1,"mat-cell",10),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(13,11),e.\u0275\u0275template(14,X,2,0,"mat-header-cell",9),e.\u0275\u0275template(15,Z,2,1,"mat-cell",10),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(16,12),e.\u0275\u0275template(17,q,2,0,"mat-header-cell",9),e.\u0275\u0275template(18,ee,2,1,"mat-cell",10),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(19,13),e.\u0275\u0275template(20,te,2,0,"mat-header-cell",9),e.\u0275\u0275template(21,ne,2,1,"mat-cell",10),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(22,14),e.\u0275\u0275template(23,oe,2,0,"mat-header-cell",9),e.\u0275\u0275template(24,re,3,0,"mat-cell",10),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(25,ae,1,0,"mat-header-row",15),e.\u0275\u0275template(26,le,1,0,"mat-row",16),e.\u0275\u0275elementEnd()()()()),2&n&&(e.\u0275\u0275property("ngClass.xs","components-container-xs"),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(7,5,o.dataSource.loading$)),e.\u0275\u0275advance(2),e.\u0275\u0275property("dataSource",o.dataSource),e.\u0275\u0275advance(17),e.\u0275\u0275property("matHeaderRowDef",o.displayedColumns),e.\u0275\u0275advance(1),e.\u0275\u0275property("matRowDefColumns",o.displayedColumns))},directives:[g.xw,g.SQ,E.oO,g.yH,a.Ye,d.O5,l.BZ,l.w1,l.fO,l.ge,l.Dz,l.ev,l.as,l.XQ,l.nj,l.Gk],pipes:[d.Ov],styles:[".table-header[_ngcontent-%COMP%]{background-color:#327ebd;color:#fff;padding:0 5px}.table-container[_ngcontent-%COMP%]{padding:5px 15px 15px}.table-component-holder[_ngcontent-%COMP%]{border:1px solid #327ebd;background-color:#fff}"]}),t})();var O=m(1038);function me(t,r){if(1&t){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-form-field",25)(1,"mat-label"),e.\u0275\u0275text(2,"Search Distributor"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"input",26,27),e.\u0275\u0275listener("keyup.enter",function(c){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().applySearch(c.target.value)}),e.\u0275\u0275elementEnd()()}}function se(t,r){if(1&t){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",28),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().downloadAllReport()}),e.\u0275\u0275text(1,"Download All Report"),e.\u0275\u0275elementEnd()}}function ce(t,r){1&t&&(e.\u0275\u0275elementStart(0,"mat-header-cell",29),e.\u0275\u0275text(1," Name "),e.\u0275\u0275elementEnd())}function de(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"mat-cell",30),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=r.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.full_name," ")}}function pe(t,r){1&t&&(e.\u0275\u0275elementStart(0,"mat-header-cell",29),e.\u0275\u0275text(1," Email "),e.\u0275\u0275elementEnd())}function ue(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"mat-cell",30),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=r.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.email," ")}}function fe(t,r){1&t&&(e.\u0275\u0275elementStart(0,"mat-header-cell",29),e.\u0275\u0275text(1," Distributor Id "),e.\u0275\u0275elementEnd())}function ge(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"mat-cell",30),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=r.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.distributor_id," ")}}function he(t,r){1&t&&(e.\u0275\u0275elementStart(0,"mat-header-cell",29),e.\u0275\u0275text(1," Upline Name"),e.\u0275\u0275elementEnd())}function _e(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"mat-cell",30),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=r.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.upline_name," ")}}function ve(t,r){1&t&&(e.\u0275\u0275elementStart(0,"mat-header-cell",29),e.\u0275\u0275text(1," Self PV"),e.\u0275\u0275elementEnd())}function Ce(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"mat-cell",30),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=r.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.self_pv," ")}}function we(t,r){1&t&&(e.\u0275\u0275elementStart(0,"mat-header-cell",29),e.\u0275\u0275text(1," Frontline Count"),e.\u0275\u0275elementEnd())}function Se(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"mat-cell"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=r.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.frontline_count," ")}}function De(t,r){1&t&&(e.\u0275\u0275elementStart(0,"mat-header-cell",29),e.\u0275\u0275text(1," Training Count"),e.\u0275\u0275elementEnd())}function xe(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"mat-cell"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=r.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.training_count," ")}}function be(t,r){1&t&&(e.\u0275\u0275elementStart(0,"mat-header-cell",29),e.\u0275\u0275text(1," List Count"),e.\u0275\u0275elementEnd())}function Ee(t,r){if(1&t&&(e.\u0275\u0275elementStart(0,"mat-cell"),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&t){const n=r.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",n.list_number," ")}}function ye(t,r){1&t&&(e.\u0275\u0275elementStart(0,"mat-header-cell",29),e.\u0275\u0275text(1," Download Report"),e.\u0275\u0275elementEnd())}function Te(t,r){if(1&t){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-cell")(1,"button",31),e.\u0275\u0275listener("click",function(){const h=e.\u0275\u0275restoreView(n).$implicit;return e.\u0275\u0275nextContext().downloadCSV(h)}),e.\u0275\u0275text(2,"Download Report"),e.\u0275\u0275elementEnd()()}}function Ie(t,r){1&t&&(e.\u0275\u0275elementStart(0,"mat-header-cell",29),e.\u0275\u0275text(1," Block User"),e.\u0275\u0275elementEnd())}function Oe(t,r){if(1&t){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-cell")(1,"button",31),e.\u0275\u0275listener("click",function(){const h=e.\u0275\u0275restoreView(n).$implicit;return e.\u0275\u0275nextContext().blockUser(h)}),e.\u0275\u0275text(2,"Block User"),e.\u0275\u0275elementEnd()()}}function Pe(t,r){1&t&&e.\u0275\u0275element(0,"mat-header-row")}function Fe(t,r){1&t&&e.\u0275\u0275element(0,"mat-row")}function Le(t,r){if(1&t){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-paginator",32,33),e.\u0275\u0275listener("page",function(c){return e.\u0275\u0275restoreView(n),e.\u0275\u0275nextContext().pageChanged(c)}),e.\u0275\u0275elementEnd()}if(2&t){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("pageSizeOptions",n.pageSizeOptions)("length",n.totalRows)("pageIndex",n.currentPage)("pageSize",n.pageSize)}}let Ae=(()=>{class t{constructor(n,o){this.router=n,this.userService=o,this.displayedColumns=["Name","Email","Upline Name","Distributor Id","Self PV","Frontline Count","Training Count","List Count","Download Report","Block User"],this.error="",this.loading=!1,this.totalRows=0,this.pageSize=10,this.currentPage=0,this.pageSizeOptions=[10,25,50],this.formula="Downline Report",this.downlineData=[],this.dataSource=new l.by,this.csv_data=[]}ngOnInit(){const n={root_id:JSON.parse(localStorage.getItem("profile")).root_id.toString(),level:"1",page_no:this.currentPage.toString(),page_size:this.pageSize.toString()};this.loadDownlines(n),console.log("data source",this.dataSource)}ngAfterViewInit(){this.dataSource.paginator=this.paginator,console.log("data sourcew",this.dataSource)}loadDownlines(n){this.userService.getActiveDownlines(n).pipe().subscribe(o=>{this.downlineData=o.data,this.length=this.downlineData.length,this.dataSource=new l.by(this.downlineData),console.log("lennngh",this.length),f().fire(o.message),setTimeout(()=>{this.paginator.pageIndex=this.currentPage,this.paginator.length=o.data[0].total_count?o.data[0].total_count:0}),this.loading=!1},o=>{console.log("errrr",this.error.error),this.error=o,this.loading=!1,f().fire({icon:"error",title:"Oops...",text:"Something went wrong!"})})}pageChanged(n){console.log({event:n}),this.pageSize=n.pageSize,this.currentPage=n.pageIndex;const o={root_id:JSON.parse(localStorage.getItem("profile")).root_id.toString(),level:"1",page_no:this.currentPage.toString(),page_size:this.pageSize.toString()};this.loadDownlines(o)}downloadCSV(n){new O.J0([{name:n.full_name,distributor:n.distributor_id,email:n.email,self:null==n.self_pv?0:n.self_pv,frontline:n.frontline_count,training:n.training_count}],this.formula,{title:"Downline Report",fieldSeparator:",",quoteStrings:'"',decimalseparator:".",showLabels:!0,showTitle:!0,useBom:!0,headers:["Name","Distributor Id","Email","Self PV","Frontline Count","Training Count"]})}downloadAllReport(){for(let c of this.downlineData)console.log("loop",c),this.csv_data.push({name:c.full_name,distributor:c.distributor_id,email:c.email,self:null==c.self_pv?0:c.self_pv,frontline:c.frontline_count,training:c.training_count});console.log("final csv ",this.csv_data),new O.J0(this.csv_data,this.formula,{title:"Downline Report",fieldSeparator:",",quoteStrings:'"',decimalseparator:".",showLabels:!0,showTitle:!0,useBom:!0,headers:["Name","Distributor Id","Email","Self PV","Frontline Count","Training Count"]})}applySearch(n){console.log("event",n),this.currentPage=0,this.pageSize=10;const o={root_id:JSON.parse(localStorage.getItem("profile")).root_id.toString(),level:"1",page_no:this.currentPage.toString(),page_size:this.pageSize.toString(),search:n};this.loadDownlines(o)}blockUser(n){console.log("data",n),this.userService.BlockUser(n).pipe().subscribe(o=>{console.log("data",o),this.ngOnInit(),f().fire(o.message)},o=>{console.log("errrr",this.error.error),this.error=o,this.loading=!1,f().fire({icon:"error",title:"Oops...",text:"Something went wrong!"})})}}return t.\u0275fac=function(n){return new(n||t)(e.\u0275\u0275directiveInject(v.F0),e.\u0275\u0275directiveInject(u.K))},t.\u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["app-your-downline"]],viewQuery:function(n,o){if(1&n&&e.\u0275\u0275viewQuery(i.NW,5),2&n){let c;e.\u0275\u0275queryRefresh(c=e.\u0275\u0275loadQuery())&&(o.paginator=c.first)}},decls:43,vars:7,consts:[["fxLayout","column","fxLayoutGap","20px",1,"components-container-gt-xs",3,"ngClass.xs"],["fxFlex","",1,"table-component-holder","mat-elevation-z4"],[1,"table-header"],[1,"mat-headline","center-align"],[1,"table-container"],["appearance","standard",4,"ngIf"],["class","download-button",3,"click",4,"ngIf"],[2,"margin-top","20px",3,"dataSource"],["table",""],["matColumnDef","Name"],["mat-sort-header","",4,"matHeaderCellDef"],["flex","50",4,"matCellDef"],["matColumnDef","Email"],["matColumnDef","Distributor Id"],["matColumnDef","Upline Name"],["matColumnDef","Self PV"],["matColumnDef","Frontline Count"],[4,"matCellDef"],["matColumnDef","Training Count"],["matColumnDef","List Count"],["matColumnDef","Download Report"],["matColumnDef","Block User"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions","length","pageIndex","pageSize","page",4,"ngIf"],["appearance","standard"],["matInput","","placeholder","Search distributor",3,"keyup.enter"],["input",""],[1,"download-button",3,"click"],["mat-sort-header",""],["flex","50"],[3,"click"],["showFirstLastButtons","",3,"pageSizeOptions","length","pageIndex","pageSize","page"],["paginator",""]],template:function(n,o){1&n&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"mat-toolbar",2)(3,"h1",3),e.\u0275\u0275text(4,"Yours Downlines"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275template(6,me,5,0,"mat-form-field",5),e.\u0275\u0275template(7,se,2,0,"button",6),e.\u0275\u0275elementStart(8,"mat-table",7,8),e.\u0275\u0275elementContainerStart(10,9),e.\u0275\u0275template(11,ce,2,0,"mat-header-cell",10),e.\u0275\u0275template(12,de,2,1,"mat-cell",11),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(13,12),e.\u0275\u0275template(14,pe,2,0,"mat-header-cell",10),e.\u0275\u0275template(15,ue,2,1,"mat-cell",11),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(16,13),e.\u0275\u0275template(17,fe,2,0,"mat-header-cell",10),e.\u0275\u0275template(18,ge,2,1,"mat-cell",11),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(19,14),e.\u0275\u0275template(20,he,2,0,"mat-header-cell",10),e.\u0275\u0275template(21,_e,2,1,"mat-cell",11),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(22,15),e.\u0275\u0275template(23,ve,2,0,"mat-header-cell",10),e.\u0275\u0275template(24,Ce,2,1,"mat-cell",11),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(25,16),e.\u0275\u0275template(26,we,2,0,"mat-header-cell",10),e.\u0275\u0275template(27,Se,2,1,"mat-cell",17),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(28,18),e.\u0275\u0275template(29,De,2,0,"mat-header-cell",10),e.\u0275\u0275template(30,xe,2,1,"mat-cell",17),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(31,19),e.\u0275\u0275template(32,be,2,0,"mat-header-cell",10),e.\u0275\u0275template(33,Ee,2,1,"mat-cell",17),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(34,20),e.\u0275\u0275template(35,ye,2,0,"mat-header-cell",10),e.\u0275\u0275template(36,Te,3,0,"mat-cell",17),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementContainerStart(37,21),e.\u0275\u0275template(38,Ie,2,0,"mat-header-cell",10),e.\u0275\u0275template(39,Oe,3,0,"mat-cell",17),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275template(40,Pe,1,0,"mat-header-row",22),e.\u0275\u0275template(41,Fe,1,0,"mat-row",23),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(42,Le,2,4,"mat-paginator",24),e.\u0275\u0275elementEnd()()()),2&n&&(e.\u0275\u0275property("ngClass.xs","components-container-xs"),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",o.length>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.length>0),e.\u0275\u0275advance(1),e.\u0275\u0275property("dataSource",o.dataSource),e.\u0275\u0275advance(32),e.\u0275\u0275property("matHeaderRowDef",o.displayedColumns),e.\u0275\u0275advance(1),e.\u0275\u0275property("matRowDefColumns",o.displayedColumns),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.length>0))},directives:[g.xw,g.SQ,E.oO,g.yH,a.Ye,d.O5,D.KE,D.hX,y.Nt,l.BZ,l.w1,l.fO,l.ge,l.Dz,l.ev,l.as,l.XQ,l.nj,l.Gk,i.NW],styles:[".table-header[_ngcontent-%COMP%]{background-color:#327ebd;color:#fff;padding:0 5px}.table-container[_ngcontent-%COMP%]{padding:5px 15px 15px}.table-component-holder[_ngcontent-%COMP%]{border:1px solid #327ebd;background-color:#fff}.download-button[_ngcontent-%COMP%]{float:right}.search-button[_ngcontent-%COMP%]{margin-right:50px}.mat-table[_ngcontent-%COMP%]{overflow-x:scroll;max-width:99%}.mat-cell[_ngcontent-%COMP%], .mat-header-cell[_ngcontent-%COMP%]{word-wrap:initial;display:table-cell;padding:0 10px;line-break:unset;width:100%;white-space:nowrap;overflow:hidden;vertical-align:middle}.mat-row[_ngcontent-%COMP%], .mat-header-row[_ngcontent-%COMP%]{display:table-row}"]}),t})();var Re=m(1363);const P=[{path:"",component:z},{path:"pending-downline",component:ie},{path:"downline",component:Ae}];let Ue=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=e.\u0275\u0275defineInjector({providers:[{provide:w.TP,useClass:S.zu,multi:!0},{provide:w.TP,useClass:S.aQ,multi:!0},u.K],imports:[[v.Bz.forChild(P),d.ez,V.y,x.o9,T.ot,a.g0,b.QW,H.Nh,B.Ps,y.c,s.UX,s.u5,a.g0,l.p0,p.p9,i.TU,Re.is]]}),t})()},1038:(L,_)=>{var d=function(){function i(){}return i.EOL="\r\n",i.BOM="\ufeff",i.DEFAULT_FIELD_SEPARATOR=",",i.DEFAULT_DECIMAL_SEPARATOR=".",i.DEFAULT_QUOTE='"',i.DEFAULT_SHOW_TITLE=!1,i.DEFAULT_TITLE="My Report",i.DEFAULT_FILENAME="mycsv.csv",i.DEFAULT_SHOW_LABELS=!1,i.DEFAULT_USE_BOM=!0,i.DEFAULT_HEADER=[],i.DEFAULT_NO_DOWNLOAD=!1,i.DEFAULT_REMOVE_EMPTY_VALUES=!1,i}();_.hd={filename:d.DEFAULT_FILENAME,fieldSeparator:d.DEFAULT_FIELD_SEPARATOR,quoteStrings:d.DEFAULT_QUOTE,decimalseparator:d.DEFAULT_DECIMAL_SEPARATOR,showLabels:d.DEFAULT_SHOW_LABELS,showTitle:d.DEFAULT_SHOW_TITLE,title:d.DEFAULT_TITLE,useBom:d.DEFAULT_USE_BOM,headers:d.DEFAULT_HEADER,noDownload:d.DEFAULT_NO_DOWNLOAD,removeEmptyValues:d.DEFAULT_REMOVE_EMPTY_VALUES};var v=function(){function i(a,l,p){this.csv="";var s=p||{};this.data="object"!=typeof a?JSON.parse(a):a,this._options=function S(i){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];for(var p,u,s=w(i),C=1;C<arguments.length;C++){for(var f in p=Object(arguments[C]))x.call(p,f)&&(s[f]=p[f]);if(Object.getOwnPropertySymbols){u=Object.getOwnPropertySymbols(p);for(var e=0;e<u.length;e++)b.call(p,u[e])&&(s[u[e]]=p[u[e]])}}return s}({},_.hd,s),this._options.filename&&(this._options.filename=l),this.generateCsv()}return i.prototype.generateCsv=function(){if(this._options.useBom&&(this.csv+=d.BOM),this._options.showTitle&&(this.csv+=this._options.title+"\r\n\n"),this.getHeaders(),this.getBody(),""!=this.csv){if(this._options.noDownload)return this.csv;var a=new Blob([this.csv],{type:"text/csv;charset=utf8;"});if(navigator.msSaveBlob){var l=this._options.filename.replace(/ /g,"_")+".csv";navigator.msSaveBlob(a,l)}else{encodeURI(this.csv);var s=document.createElement("a");s.href=URL.createObjectURL(a),s.setAttribute("visibility","hidden"),s.download=this._options.filename.replace(/ /g,"_")+".csv",document.body.appendChild(s),s.click(),document.body.removeChild(s)}}else console.log("Invalid data")},i.prototype.getHeaders=function(){var a=this;if(this._options.headers.length>0){var p=this._options.headers.reduce(function(s,u){return s+u+a._options.fieldSeparator},"");p=p.slice(0,-1),this.csv+=p+d.EOL}},i.prototype.getBody=function(){for(var a=0;a<this.data.length;a++){var l="";for(var p in this.data[a])l+=this.formartData(this.data[a][p])+this._options.fieldSeparator;l=l.slice(0,-1),this.csv+=l+d.EOL}},i.prototype.formartData=function(a){return this._options.removeEmptyValues&&!a?"":"locale"===this._options.decimalseparator&&i.isFloat(a)?a.toLocaleString():"."!==this._options.decimalseparator&&i.isFloat(a)?a.toString().replace(".",this._options.decimalseparator):"string"==typeof a?(a=a.replace(/"/g,'""'),(this._options.quoteStrings||a.indexOf(",")>-1||a.indexOf("\n")>-1||a.indexOf("\r")>-1)&&(a=this._options.quoteStrings+a+this._options.quoteStrings),a):"boolean"==typeof a?a?"TRUE":"FALSE":a},i.prototype.getCsv=function(){return this.csv},i.isFloat=function(a){return+a===a&&(!isFinite(a)||Boolean(a%1))},i}();_.J0=v;var x=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;function w(i){if(null==i)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(i)}}}]);